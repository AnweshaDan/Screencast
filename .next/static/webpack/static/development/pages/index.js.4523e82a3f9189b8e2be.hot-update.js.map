{"version":3,"file":"static/webpack/static/development/pages/index.js.4523e82a3f9189b8e2be.hot-update.js","sources":["webpack:///./components/FbLog2.js"],"sourcesContent":["import React from \"react\";\nimport FacebookLogin from \"react-facebook-login/dist/facebook-login-render-props\";\nimport { SocialMediaIconsReact } from 'social-media-icons-react';\n//import Router from 'next/dist/next-server/server/router';\nimport Router from \"next/router\";\nimport axios from \"axios\";\nimport AnsAlert from \"../components/AnsAlert\"\nconst LoginButton = ({ facebookResponse }) => (\n\n  <FacebookLogin\n    appId=\"330897641228705\"\n    autoload={false}\n    fields=\"name,email,picture\"\n    callback={facebookResponse}\n    render={renderProps => (\n      <button style={{ backgroundColor: \"rgba(0,0,0,0)\", border: \"none\" }} onClick={renderProps.onClick}>\n        <SocialMediaIconsReact borderColor=\"rgba(0,0,0,0.25)\" borderWidth=\"3\" borderStyle=\"inset\" icon=\"facebook\" iconColor=\"rgba(255,255,255,1)\" backgroundColor=\"rgba(28,149,223,1)\" iconSize=\"5\" roundness=\"29%\" url=\"http://localhost:3000/game\" size=\"45\" />\n      </button>)}\n\n\n\n  >\n  </FacebookLogin>\n\n);\n\nclass FbLog2 extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      user: false,\n      isSignedIn: false,\n      access: \"\"\n    };\n  }\n  componentDidMount() {\n    if(localStorage.getItem(\"email\"))\n    {\n      this.setState({isSignedIn : true});\n      if((localStorage.getItem('start') <= Date.now()))\n      Router.push(\"/game\");\n      else \n      {\n        AnsAlert(-1);\n        console.log(\"SANTA CLAUS\");\n      }\n    }\n  }\n\n  facebookResponse = (response) => {\n    console.log(response);\n    localStorage.setItem(\"email\", response.email);\n    localStorage.setItem(\"name\", response.name);\n    localStorage.setItem(\"image\", response.picture.data.url);\n    localStorage.setItem('token', response.accessToken)\n    console.log(localStorage.getItem('email'));\n\n\n\n    this.setState({ user: response, isSignedIn: true, access: response.accessToken });\n    axios\n      .post(\"https://screencast2020.herokuapp.com/api/facebooklogin\", {\n        accesstoken: response.accessToken,\n        expiration_time: response.data_access_expiration_time,\n        userID: response.userID\n      })\n      .then((res) => {\n        console.log(res);\n        localStorage.setItem('token', res.data.access_token)\n\n        this.setState({ access: res.data.access_token })\n\n        console.log(localStorage.getItem(\"token\"));\n        console.log(this.state.access);\n\n        if((localStorage.getItem('start') <= Date.now()))\n        Router.push(\"/game\");\n        else\n        AnsAlert(-1);\n      });\n\n  };\n\n  render() {\n    return (\n      <div>\n        { !localStorage.getItem('email') && (\n          <div\n            style={{ margin: \"0 auto\", textAlign: \"center\", paddingTop: \"0px\" }}\n          >\n            <LoginButton facebookResponse={this.facebookResponse} ></LoginButton>\n\n          </div>\n        )}\n        \n      </div>\n    );\n  }\n}\n\nexport default FbLog2;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AACA;AAkBA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AAHA;AAMA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AAIA;AAEA;AACA;AArDA;AACA;AACA;AACA;AAHA;AAFA;AAOA;AACA;;;AAAA;AACA;AAEA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;;;AAoCA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;;;;AAvEA;AACA;AAyEA;;;;A","sourceRoot":""}