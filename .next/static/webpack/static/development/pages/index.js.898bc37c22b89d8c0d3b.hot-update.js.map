{"version":3,"file":"static/webpack/static/development/pages/index.js.898bc37c22b89d8c0d3b.hot-update.js","sources":["webpack:///./components/FbLog2.js"],"sourcesContent":["import React from \"react\";\nimport FacebookLoginWithButton from \"react-facebook-login\";\n\n//import Router from 'next/dist/next-server/server/router';\nimport Router from \"next/router\";\nimport axios from \"axios\";\n\nconst LoginButton = ({ facebookResponse }) => (\n  <FacebookLoginWithButton\n    appId=\"330897641228705\"\n    autoload={false}\n    fields=\"name,email,picture\"\n    callback={facebookResponse}\n    cssClass=\"fbbutton\"\n  />\n);\n\nclass FbLog2 extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      user: false,\n      isSignedIn: false,\n      access:\"\"\n    };\n  }\n  componentDidMount() {\n    if (localStorage.getItem(\"email\")) Router.push(\"/game\");\n  }\n\n  facebookResponse = (response) => {\n    console.log(response);\n   \n    localStorage.setItem('token',response.accessToken)\n    \n\n    \n\n    this.setState({ ...this.state, user: response, isSignedIn: true,access:response.accessToken });\n    axios\n      .post(\"https://screencast2020.herokuapp.com/api/facebooklogin\", {\n       token:response.accessToken\n      })\n      .then((res) => {\n        console.log(res);\n        localStorage.setItem('token',res.data.access_token)\n        localStorage.setItem('ref_token',res.data.refresh_token)\n        this.setState({access: res.data.access_token})\n        this.refresh(res.data.access_token,res.data.refresh_token);\n        console.log(localStorage.getItem(\"token\"));\n      console.log(this.state.access);\n      localStorage.setItem(\"email\", response.email);\n      localStorage.setItem(\"name\", response.name);\n      localStorage.setItem(\"image\", response.picture.data.url);\n      Router.push(\"/game\");\n      });\n      \n  };\n\n  render() {\n    return (\n      <div>\n        <div\n          style={{ margin: \"auto\", textAlign: \"center\", paddingTop: \"10px\" }}\n        >\n          <LoginButton facebookResponse={this.facebookResponse} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default FbLog2;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AACA;AASA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAaA;AAEA;AACA;AAIA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AADA;AAIA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAtCA;AACA;AACA;AACA;AAHA;AAFA;AAOA;AACA;;;AAAA;AACA;AACA;;;AA+BA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;;;;AApDA;AACA;AAsDA;;;;A","sourceRoot":""}